(()=>{"use strict";var e,i={53:()=>{const e=window.wp.blocks,i=window.wp.i18n,l=window.wp.blockEditor,t=window.wp.components,s=window.wp.data,r=(window.wp.coreData,window.ReactJSXRuntime),n=JSON.parse('{"UU":"listings/listing-gallery"}');(0,e.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:n}){const{listingId:a}=e,o=(0,s.useSelect)((e=>{const i=e("core").getEntityRecords("postType","listing",{per_page:-1,status:"publish"});return i?i.map((e=>({value:e.id,label:e.title.rendered}))):[]}),[]),c=(0,s.useSelect)((e=>{if(!a)return[];const i=e("core").getEntityRecord("postType","listing",a);if(!i)return[];const l=i.meta?._listing_gallery_images;let t=[];return l&&(t=Array.isArray(l)?l:l.split(",").filter((e=>e.trim()))),0===t.length?[]:t.map((i=>{const l=e("core").getMedia(parseInt(i.trim()));return l?{id:l.id,url:l.source_url,alt:l.alt_text,caption:l.caption?.raw||"",thumbnail:l.media_details?.sizes?.thumbnail?.source_url||l.source_url,medium:l.media_details?.sizes?.medium?.source_url||l.source_url}:null})).filter(Boolean)}),[a]),g=e=>{n({listingId:parseInt(e)||0})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.InspectorControls,{children:(0,r.jsx)(t.PanelBody,{title:(0,i.__)("Gallery Settings","listings"),children:(0,r.jsx)(t.SelectControl,{label:(0,i.__)("Select Listing","listings"),value:a||"",options:[{value:"",label:(0,i.__)("Select a listing...","listings")},...o],onChange:g})})}),(0,r.jsx)("div",{...(0,l.useBlockProps)(),children:a?0===c.length?(0,r.jsx)(t.Placeholder,{icon:"gallery",label:(0,i.__)("No Images Found","listings"),instructions:(0,i.__)("The selected listing has no gallery images. Add images to the listing in the admin panel.","listings")}):(0,r.jsx)("div",{className:"listing-gallery-grid-style",children:c.slice(0,5).map(((e,i)=>(0,r.jsx)("div",{className:"gallery-item"+(0===i?" gallery-item--hero":""),children:(0,r.jsx)("img",{src:e.url,alt:e.alt,className:"gallery-item__img"})},e.id)))}):(0,r.jsx)(t.Placeholder,{icon:"gallery",label:(0,i.__)("Listing Gallery","listings"),instructions:(0,i.__)("Select a listing to display its gallery images.","listings"),children:(0,r.jsx)(t.SelectControl,{value:a||"",options:[{value:"",label:(0,i.__)("Select a listing...","listings")},...o],onChange:g})})})]})}})}},l={};function t(e){var s=l[e];if(void 0!==s)return s.exports;var r=l[e]={exports:{}};return i[e](r,r.exports,t),r.exports}t.m=i,e=[],t.O=(i,l,s,r)=>{if(!l){var n=1/0;for(g=0;g<e.length;g++){for(var[l,s,r]=e[g],a=!0,o=0;o<l.length;o++)(!1&r||n>=r)&&Object.keys(t.O).every((e=>t.O[e](l[o])))?l.splice(o--,1):(a=!1,r<n&&(n=r));if(a){e.splice(g--,1);var c=s();void 0!==c&&(i=c)}}return i}r=r||0;for(var g=e.length;g>0&&e[g-1][2]>r;g--)e[g]=e[g-1];e[g]=[l,s,r]},t.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={769:0,773:0};t.O.j=i=>0===e[i];var i=(i,l)=>{var s,r,[n,a,o]=l,c=0;if(n.some((i=>0!==e[i]))){for(s in a)t.o(a,s)&&(t.m[s]=a[s]);if(o)var g=o(t)}for(i&&i(l);c<n.length;c++)r=n[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(g)},l=globalThis.webpackChunklistings=globalThis.webpackChunklistings||[];l.forEach(i.bind(null,0)),l.push=i.bind(null,l.push.bind(l))})();var s=t.O(void 0,[773],(()=>t(53)));s=t.O(s)})();